<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.bohai.employeeSalary.dao.CheckMessageMapper" >
  <resultMap id="BaseResultMap" type="com.bohai.employeeSalary.entity.CheckMessage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 06 15:18:02 CST 2017.
    -->
    <id column="ID" property="id" jdbcType="VARCHAR" />
    <result column="PROBATION_DATE_START" property="probationDateStart" jdbcType="TIMESTAMP" />
    <result column="FORMAL_DATE_START" property="formalDateStart" jdbcType="TIMESTAMP" />
    <result column="LEAVE_DATE" property="leaveDate" jdbcType="TIMESTAMP" />
    <result column="NAME" property="name" jdbcType="VARCHAR" />
    <result column="ID_NUMBER" property="idNumber" jdbcType="VARCHAR" />
    <result column="STAFF_NUMBER" property="staffNumber" jdbcType="VARCHAR" />
    <result column="POSITION_SALARY" property="positionSalary" jdbcType="VARCHAR" />
    <result column="WORK_YEARS" property="workYears" jdbcType="VARCHAR" />
    <result column="EMAIL" property="email" jdbcType="VARCHAR" />
    <result column="REMARK" property="remark" jdbcType="VARCHAR" />
    <result column="DEPARTMENT_ID" property="departmentId" jdbcType="VARCHAR" />
    <result column="DEP_NAME" property="departmentName" jdbcType="VARCHAR" />
    <result column="IS_LEAVE" property="isLeave" jdbcType="VARCHAR" />
    <result column="CREATE_TIME" property="createTime" jdbcType="TIMESTAMP" />
    <result column="UPDATE_TIME" property="updateTime" jdbcType="TIMESTAMP" />
    <result column="IS_PROBATION" property="isProbation" jdbcType="VARCHAR" />
    <result column="COEFFICEIENT" property="coefficeient" jdbcType="VARCHAR" />
    <result column="SKILL_SALARY" property="skillSalary" jdbcType="VARCHAR" />
    <result column="TAGE" property="tage" jdbcType="VARCHAR" />
    <result column="SUBMITTER" property="submitter" jdbcType="VARCHAR"/>
    <result column="CHECKER" property="checker" jdbcType="VARCHAR"/>
    <result column="SUBMIT_TIME" property="submitTime" jdbcType="TIMESTAMP"/>
    <result column="CHECK_TIME" property="checkTime" jdbcType="TIMESTAMP"/>
    <result column="SUBMIT_TYPE" property="submitType" jdbcType="VARCHAR"/>
    <result column="APPROVAL_OPINION" property="approvalOpinion" jdbcType="VARCHAR"/>
  </resultMap>
  <sql id="Base_Column_List" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 06 15:18:02 CST 2017.
    -->
    ID, PROBATION_DATE_START, FORMAL_DATE_START, LEAVE_DATE, NAME, ID_NUMBER, STAFF_NUMBER, 
    POSITION_SALARY, WORK_YEARS, EMAIL, REMARK, DEPARTMENT_ID, IS_LEAVE, CREATE_TIME, 
    UPDATE_TIME, IS_PROBATION, COEFFICEIENT, SKILL_SALARY, TAGE ,SUBMITTER ,CHECKER ,SUBMIT_TIME ,CHECK_TIME ,SUBMIT_TYPE,
    APPROVAL_OPINION
  </sql>
  <select id="selectByPrimaryKey" resultMap="BaseResultMap" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 06 15:18:02 CST 2017.
    -->
    select 
    <include refid="Base_Column_List" />
    from CHECK_MESSAGE
    where ID = #{id,jdbcType=VARCHAR}
  </select>
  <delete id="deleteByPrimaryKey" parameterType="java.lang.String" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 06 15:18:02 CST 2017.
    -->
    delete from CHECK_MESSAGE
    where ID = #{id,jdbcType=VARCHAR}
  </delete>
  <insert id="insert" parameterType="com.bohai.employeeSalary.entity.CheckMessage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 06 15:18:02 CST 2017.
    -->
    insert into CHECK_MESSAGE (ID, PROBATION_DATE_START, FORMAL_DATE_START, 
      LEAVE_DATE, NAME, ID_NUMBER, 
      STAFF_NUMBER, POSITION_SALARY, WORK_YEARS, 
      EMAIL, REMARK, DEPARTMENT_ID, 
      IS_LEAVE, CREATE_TIME, UPDATE_TIME, 
      IS_PROBATION, COEFFICEIENT, SKILL_SALARY, 
      TAGE,SUBMITTER,CHECKER,SUBMIT_TIME,CHECK_TIME,SUBMIT_TYPE,APPROVAL_OPINION)
    values (#{id,jdbcType=VARCHAR}, #{probationDateStart,jdbcType=TIMESTAMP}, #{formalDateStart,jdbcType=TIMESTAMP}, 
      #{leaveDate,jdbcType=TIMESTAMP}, #{name,jdbcType=VARCHAR}, #{idNumber,jdbcType=VARCHAR}, 
      #{staffNumber,jdbcType=VARCHAR}, #{positionSalary,jdbcType=VARCHAR}, #{workYears,jdbcType=VARCHAR}, 
      #{email,jdbcType=VARCHAR}, #{remark,jdbcType=VARCHAR}, #{departmentId,jdbcType=VARCHAR}, 
      #{isLeave,jdbcType=VARCHAR}, #{createTime,jdbcType=TIMESTAMP}, #{updateTime,jdbcType=TIMESTAMP}, 
      #{isProbation,jdbcType=VARCHAR}, #{coefficeient,jdbcType=VARCHAR}, #{skillSalary,jdbcType=VARCHAR}, 
      #{tage,jdbcType=VARCHAR},#{submitter,jdbcType=VARCHAR},#{checker,jdbcType=VARCHAR},#{submitTime,jdbcType=TIMESTAMP},
      #{checkTime,jdbcType=TIMESTAMP},#{submitType,jdbcType=VARCHAR},#{approvalOpinion,jdbcType=VARCHAR})
  </insert>
  <insert id="insertSelective" parameterType="com.bohai.employeeSalary.entity.CheckMessage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 06 15:18:02 CST 2017.
    -->
    insert into CHECK_MESSAGE
    <trim prefix="(" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        ID,
      </if>
      <if test="probationDateStart != null" >
        PROBATION_DATE_START,
      </if>
      <if test="formalDateStart != null" >
        FORMAL_DATE_START,
      </if>
      <if test="leaveDate != null" >
        LEAVE_DATE,
      </if>
      <if test="name != null" >
        NAME,
      </if>
      <if test="idNumber != null" >
        ID_NUMBER,
      </if>
      <if test="staffNumber != null" >
        STAFF_NUMBER,
      </if>
      <if test="positionSalary != null" >
        POSITION_SALARY,
      </if>
      <if test="workYears != null" >
        WORK_YEARS,
      </if>
      <if test="email != null" >
        EMAIL,
      </if>
      <if test="remark != null" >
        REMARK,
      </if>
      <if test="departmentId != null" >
        DEPARTMENT_ID,
      </if>
      <if test="isLeave != null" >
        IS_LEAVE,
      </if>
      <if test="createTime != null" >
        CREATE_TIME,
      </if>
      <if test="updateTime != null" >
        UPDATE_TIME,
      </if>
      <if test="isProbation != null" >
        IS_PROBATION,
      </if>
      <if test="coefficeient != null" >
        COEFFICEIENT,
      </if>
      <if test="skillSalary != null" >
        SKILL_SALARY,
      </if>
      <if test="tage != null" >
        TAGE,
      </if>
    </trim>
    <trim prefix="values (" suffix=")" suffixOverrides="," >
      <if test="id != null" >
        #{id,jdbcType=VARCHAR},
      </if>
      <if test="probationDateStart != null" >
        #{probationDateStart,jdbcType=TIMESTAMP},
      </if>
      <if test="formalDateStart != null" >
        #{formalDateStart,jdbcType=TIMESTAMP},
      </if>
      <if test="leaveDate != null" >
        #{leaveDate,jdbcType=TIMESTAMP},
      </if>
      <if test="name != null" >
        #{name,jdbcType=VARCHAR},
      </if>
      <if test="idNumber != null" >
        #{idNumber,jdbcType=VARCHAR},
      </if>
      <if test="staffNumber != null" >
        #{staffNumber,jdbcType=VARCHAR},
      </if>
      <if test="positionSalary != null" >
        #{positionSalary,jdbcType=VARCHAR},
      </if>
      <if test="workYears != null" >
        #{workYears,jdbcType=VARCHAR},
      </if>
      <if test="email != null" >
        #{email,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        #{remark,jdbcType=VARCHAR},
      </if>
      <if test="departmentId != null" >
        #{departmentId,jdbcType=VARCHAR},
      </if>
      <if test="isLeave != null" >
        #{isLeave,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="isProbation != null" >
        #{isProbation,jdbcType=VARCHAR},
      </if>
      <if test="coefficeient != null" >
        #{coefficeient,jdbcType=VARCHAR},
      </if>
      <if test="skillSalary != null" >
        #{skillSalary,jdbcType=VARCHAR},
      </if>
      <if test="tage != null" >
        #{tage,jdbcType=VARCHAR},
      </if>
    </trim>
  </insert>
  <update id="updateByPrimaryKeySelective" parameterType="com.bohai.employeeSalary.entity.CheckMessage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 06 15:18:02 CST 2017.
    -->
    update CHECK_MESSAGE
    <set >
      <if test="probationDateStart != null" >
        PROBATION_DATE_START = #{probationDateStart,jdbcType=TIMESTAMP},
      </if>
      <if test="formalDateStart != null" >
        FORMAL_DATE_START = #{formalDateStart,jdbcType=TIMESTAMP},
      </if>
      <if test="leaveDate != null" >
        LEAVE_DATE = #{leaveDate,jdbcType=TIMESTAMP},
      </if>
      <if test="name != null" >
        NAME = #{name,jdbcType=VARCHAR},
      </if>
      <if test="idNumber != null" >
        ID_NUMBER = #{idNumber,jdbcType=VARCHAR},
      </if>
      <if test="staffNumber != null" >
        STAFF_NUMBER = #{staffNumber,jdbcType=VARCHAR},
      </if>
      <if test="positionSalary != null" >
        POSITION_SALARY = #{positionSalary,jdbcType=VARCHAR},
      </if>
      <if test="workYears != null" >
        WORK_YEARS = #{workYears,jdbcType=VARCHAR},
      </if>
      <if test="email != null" >
        EMAIL = #{email,jdbcType=VARCHAR},
      </if>
      <if test="remark != null" >
        REMARK = #{remark,jdbcType=VARCHAR},
      </if>
      <if test="departmentId != null" >
        DEPARTMENT_ID = #{departmentId,jdbcType=VARCHAR},
      </if>
      <if test="isLeave != null" >
        IS_LEAVE = #{isLeave,jdbcType=VARCHAR},
      </if>
      <if test="createTime != null" >
        CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      </if>
      <if test="updateTime != null" >
        UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
      </if>
      <if test="isProbation != null" >
        IS_PROBATION = #{isProbation,jdbcType=VARCHAR},
      </if>
      <if test="coefficeient != null" >
        COEFFICEIENT = #{coefficeient,jdbcType=VARCHAR},
      </if>
      <if test="skillSalary != null" >
        SKILL_SALARY = #{skillSalary,jdbcType=VARCHAR},
      </if>
      <if test="tage != null" >
        TAGE = #{tage,jdbcType=VARCHAR},
      </if>
      <if test="submitter != null" >
       SUBMITTER = #{submitter,jdbcType=VARCHAR},
       </if>
       <if test="checker != null" >
      CHECKER = #{checker,jdbcType=VARCHAR},
      </if>
      <if test="submitTime != null" >
      SUBMIT_TIME = #{submitTime,jdbcType=TIMESTAMP},
      </if>
      <if test="checkTime != null" >
      CHECK_TIME = #{checkTime,jdbcType=TIMESTAMP},
      </if>
      <if test="submitType != null" >
      SUBMIT_TYPE = #{submitType,jdbcType=VARCHAR},
      </if>
      <if test="approvalOpinion != null" >
      APPROVAL_OPINION = #{approvalOpinion,jdbcType=VARCHAR}
      </if>
    </set>
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  <update id="updateByPrimaryKey" parameterType="com.bohai.employeeSalary.entity.CheckMessage" >
    <!--
      WARNING - @mbggenerated
      This element is automatically generated by MyBatis Generator, do not modify.
      This element was generated on Wed Sep 06 15:18:02 CST 2017.
    -->
    update CHECK_MESSAGE
    set PROBATION_DATE_START = #{probationDateStart,jdbcType=TIMESTAMP},
      FORMAL_DATE_START = #{formalDateStart,jdbcType=TIMESTAMP},
      LEAVE_DATE = #{leaveDate,jdbcType=TIMESTAMP},
      NAME = #{name,jdbcType=VARCHAR},
      ID_NUMBER = #{idNumber,jdbcType=VARCHAR},
      STAFF_NUMBER = #{staffNumber,jdbcType=VARCHAR},
      POSITION_SALARY = #{positionSalary,jdbcType=VARCHAR},
      WORK_YEARS = #{workYears,jdbcType=VARCHAR},
      EMAIL = #{email,jdbcType=VARCHAR},
      REMARK = #{remark,jdbcType=VARCHAR},
      DEPARTMENT_ID = #{departmentId,jdbcType=VARCHAR},
      IS_LEAVE = #{isLeave,jdbcType=VARCHAR},
      CREATE_TIME = #{createTime,jdbcType=TIMESTAMP},
      UPDATE_TIME = #{updateTime,jdbcType=TIMESTAMP},
      IS_PROBATION = #{isProbation,jdbcType=VARCHAR},
      COEFFICEIENT = #{coefficeient,jdbcType=VARCHAR},
      SKILL_SALARY = #{skillSalary,jdbcType=VARCHAR},
      TAGE = #{tage,jdbcType=VARCHAR},
      SUBMITTER = #{submitter,jdbcType=VARCHAR},
      CHECKER = #{checker,jdbcType=VARCHAR},
      SUBMIT_TIME = #{submitTime,jdbcType=TIMESTAMP},
      CHECK_TIME = #{checkTime,jdbcType=TIMESTAMP},
      SUBMIT_TYPE = #{submitType,jdbcType=VARCHAR},
      APPROVAL_OPINION = #{approvalOpinion,jdbcType=VARCHAR}
    where ID = #{id,jdbcType=VARCHAR}
  </update>
  
  <select id="queryCheckMessages" parameterType="java.util.Map" resultType="java.util.Map">
  select 
c.DEP_NAME,
to_char(c.PROBATION_DATE_START,'yyyy-mm-dd') as PROBATION_DATE_START,
to_char(c.FORMAL_DATE_START,'yyyy-mm-dd') as FORMAL_DATE_START,
to_char(c.LEAVE_DATE,'yyyy-mm-dd') as LEAVE_DATE,
c.NAME ,
c.ID_NUMBER ,
c.STAFF_NUMBER ,
c.POSITION_SALARY ,
c.WORK_YEARS ,
c.EMAIL ,
c.REMARK ,
c.DEPARTMENT_ID ,
c.IS_LEAVE ,
to_char(c.CREATE_TIME,'yyyy-mm-dd') as CREATE_TIME,
to_char(c.UPDATE_TIME,'yyyy-mm-dd') as UPDATE_TIME,
c.IS_PROBATION ,
c.COEFFICEIENT ,
c.SKILL_SALARY ,
c.ID ,
c.TAGE ,
c.SUBMITTER ,
c.CHECKER ,
c.SUBMIT_TIME ,
c.CHECK_TIME ,
c.SUBMIT_TYPE ,
c.APPROVAL_OPINION,
to_char(f.PROBATION_DATE_START1,'yyyy-mm-dd') as PROBATION_DATE_START1,
to_char(f.FORMAL_DATE_START1,'yyyy-mm-dd') as FORMAL_DATE_START1,
to_char(f.LEAVE_DATE1,'yyyy-mm-dd') as LEAVE_DATE1,
f.NAME1,
f.ID_NUMBER1,
f.STAFF_NUMBER1,
f.POSITION_SALARY1,
f.WORK_YEARS1,
f.EMAIL1,
f.REMARK1,
f.DEPARTMENT_ID1,
f.IS_LEAVE1,
to_char(f.CREATE_TIME1,'yyyy-mm-dd') as CREATE_TIME1,
to_char(f.UPDATE_TIME1,'yyyy-mm-dd') as UPDATE_TIME1,
f.IS_PROBATION1,
f.COEFFICEIENT1,
f.SKILL_SALARY1,
f.DEP_NAME1
from
(select a.PROBATION_DATE_START ,
a.FORMAL_DATE_START ,
a.LEAVE_DATE ,
a.NAME ,
a.ID_NUMBER ,
a.STAFF_NUMBER ,
a.POSITION_SALARY ,
a.WORK_YEARS ,
a.EMAIL ,
a.REMARK ,
a.DEPARTMENT_ID ,
a.IS_LEAVE ,
a.CREATE_TIME ,
a.UPDATE_TIME ,
a.IS_PROBATION ,
a.COEFFICEIENT ,
a.SKILL_SALARY ,
a.ID ,
a.TAGE ,
a.SUBMITTER ,
a.CHECKER ,
a.SUBMIT_TIME ,
a.CHECK_TIME ,
a.SUBMIT_TYPE ,
a.APPROVAL_OPINION,
b.DEP_NAME from
CHECK_MESSAGE a left join DEPARTMENT b on a.DEPARTMENT_ID=b.DEP_NUMBER)c 

left join 

(select d.PROBATION_DATE_START as PROBATION_DATE_START1,
d.FORMAL_DATE_START as FORMAL_DATE_START1,
d.LEAVE_DATE as LEAVE_DATE1,
d.NAME as NAME1,
d.ID_NUMBER as ID_NUMBER1,
d.STAFF_NUMBER as STAFF_NUMBER1,
d.POSITION_SALARY as POSITION_SALARY1,
d.WORK_YEARS as WORK_YEARS1,
d.EMAIL as EMAIL1,
d.REMARK as REMARK1,
d.DEPARTMENT_ID as DEPARTMENT_ID1,
d.IS_LEAVE as IS_LEAVE1,
d.CREATE_TIME as CREATE_TIME1,
d.UPDATE_TIME as UPDATE_TIME1,
d.IS_PROBATION as IS_PROBATION1,
d.COEFFICEIENT as COEFFICEIENT1,
d.SKILL_SALARY as SKILL_SALARY1,
e.DEP_NAME as DEP_NAME1 from
STAFF_INFO d left join DEPARTMENT e on d.DEPARTMENT_ID=e.DEP_NUMBER)f 

on c.STAFF_NUMBER=f.STAFF_NUMBER1

  </select>
  
  <select id="selectByCheckCondition" parameterType="com.bohai.employeeSalary.vo.QueryCheckMessageParamVO" resultMap="BaseResultMap">
    SELECT 
    <include refid="Base_Column_List" />
    ,b.DEP_NAME 
  FROM CHECK_MESSAGE a LEFT JOIN DEPARTMENT b ON a.DEPARTMENT_ID=b.DEP_NUMBER 
  <where>
   <if test="departmentId !=null and departmentId !=''">
    a.DEPARTMENT_ID=#{departmentId} 
   </if>
   <if test="staffNumber !=null and staffNumber !=''">
    AND a.STAFF_NUMBER=#{staffNumber} 
   </if>
   <if test="name !=null and name !=''">
    AND a.NAME=#{name}   
   </if>
   <if test="tage !=null and tage !=''">
    AND a.TAGE=#{tage}   
   </if>
   </where>
   ORDER BY a.STAFF_NUMBER
 </select>
 
 <select id="selectBySubmitter" parameterType="java.lang.String" resultMap="BaseResultMap">
    SELECT 
    <include refid="Base_Column_List" />
    ,b.DEP_NAME 
  FROM CHECK_MESSAGE a LEFT JOIN DEPARTMENT b ON a.DEPARTMENT_ID=b.DEP_NUMBER 
  <where>
   a.SUBMITTER=#{userName}
   </where>
   
   ORDER BY a.TAGE
 </select>
 
  <select id="selectByStaffNumber" parameterType="java.lang.String" resultMap="BaseResultMap">
    SELECT 
    <include refid="Base_Column_List" />
    ,b.DEP_NAME 
  FROM CHECK_MESSAGE a LEFT JOIN DEPARTMENT b ON a.DEPARTMENT_ID=b.DEP_NUMBER 
  <where>
   a.STAFF_NUMBER=#{staffNumber}
   </where>
   
   ORDER BY a.TAGE
 </select>
</mapper>